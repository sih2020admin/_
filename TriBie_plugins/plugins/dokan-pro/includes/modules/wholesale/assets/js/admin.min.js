!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=68)}({0:function(e,t){e.exports=function(e,t,s,o,n,r){var a,i=e=e||{},u=typeof e.default;"object"!==u&&"function"!==u||(a=e,i=e.default);var l,c="function"==typeof i?i.options:i;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId=n),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):o&&(l=o),l){var d=c.functional,h=d?c.render:c.beforeCreate;d?(c._injectStyles=l,c.render=function(e,t){return l.call(t),h(e,t)}):c.beforeCreate=h?[].concat(h,l):[l]}return{esModule:a,exports:i,options:c}}},17:function(e,t,s){"use strict";var o=dokan_get_lib("ListTable"),n=dokan_get_lib("Switches"),r=dokan_get_lib("Search");t.a={name:"WholesaleCustomer",components:{ListTable:o,Switches:n,Search:r},data:function(){return{showCb:!0,counts:{deactive:0,active:0,all:0},totalItems:0,perPage:20,totalPages:1,loading:!1,columns:{full_name:{label:this.__("Name","dokan")},email:{label:this.__("E-mail","dokan")},username:{label:this.__("Username","dokan")},role:{label:this.__("Roles","dokan")},registered:{label:this.__("Registered","dokan"),sortable:!0},wholesale_status:{label:this.__("Status","dokan")}},actionColumn:"full_name",actions:[{key:"edit",label:this.__("Edit","dokan")},{key:"orders",label:this.__("Orders","dokan")},{key:"delete",label:this.__("Remove","dokan")}],bulkActions:[{key:"activate",label:this.__("Active","dokan")},{key:"deactivate",label:this.__("Deactive","dokan")}],customers:[]}},watch:{"$route.query.status":function(){this.fetchWholesaleCustomers()},"$route.query.page":function(){this.fetchWholesaleCustomers()},"$route.query.orderby":function(){this.fetchWholesaleCustomers()},"$route.query.order":function(){this.fetchWholesaleCustomers()}},computed:{currentStatus:function(){return this.$route.query.status||"all"},currentPage:function(){var e=this.$route.query.page||1;return parseInt(e)},sortBy:function(){return this.$route.query.orderby||"registered"},sortOrder:function(){return this.$route.query.order||"desc"}},created:function(){this.fetchWholesaleCustomers()},methods:{getFullName:function(e){return e.first_name+" "+e.last_name},doSearch:function(e){var t=this,s=this;s.loading=!0,dokan.api.get("/wholesale/customers/?search="+e,{page:this.currentPage,orderby:this.sortBy,order:this.sortOrder}).done(function(e,o,n){s.customers=e,s.loading=!1,t.updatePagination(n)})},updatedCounts:function(e){this.counts.deactive=parseInt(e.getResponseHeader("X-Status-Deactive")),this.counts.active=parseInt(e.getResponseHeader("X-Status-Active")),this.counts.all=parseInt(e.getResponseHeader("X-Status-All"))},updatePagination:function(e){this.totalPages=parseInt(e.getResponseHeader("X-WP-TotalPages")),this.totalItems=parseInt(e.getResponseHeader("X-WP-Total"))},fetchWholesaleCustomers:function(){var e=this,t=this;t.loading=!0,dokan.api.get("/wholesale/customers",{per_page:this.perPage,page:this.currentPage,status:this.currentStatus,orderby:this.sortBy,order:this.sortOrder}).done(function(s,o,n){t.customers=s,t.loading=!1,e.updatedCounts(n),e.updatePagination(n)})},onActionClick:function(e,t){var s=this;"delete"===e&&confirm("Are you sure to delete?")&&dokan.api.put("/wholesale/customer/"+t.id,{status:"delete"}).done(function(e){s.$notify({title:s.__("Success!","dokan"),type:"success",text:s.__("Successfully removed from wholesale customer lists","dokan")}),s.fetchWholesaleCustomers()})},onSwitch:function(e,t){var s=this,o=!1===e?this.__("The customer has been disabled for wholesale.","dokan"):this.__("Wholesale capability activate","dokan");dokan.api.put("/wholesale/customer/"+t,{status:!1===e?"deactivate":"activate"}).done(function(e){s.$notify({title:s.__("Success!","dokan"),type:"success",text:o}),"all"!==s.currentStatus&&s.fetchWholesaleCustomers()})},moment:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return moment(e)}),goToPage:function(e){this.$router.push({name:"WholesaleCustomer",query:{status:this.currentStatus,page:e}})},onBulkAction:function(e,t){var s=this,o={};o[e]=t,this.loading=!0,dokan.api.put("/wholesale/customers/batch",o).done(function(e){s.bulkLocal=-1,s.checkedItems=[],s.loading=!1,s.fetchWholesaleCustomers()})},sortCallback:function(e,t){this.$router.push({name:"WholesaleCustomer",query:{status:this.currentStatus,page:1,orderby:e,order:t}})},ordersUrl:function(e){return dokan.urls.adminRoot+"edit.php?post_type=shop_order&_customer_user="+e},editUrl:function(e){return dokan.urls.adminRoot+"user-edit.php?user_id="+e}}}},68:function(e,t,s){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(s(69));dokan_add_route(o.default)},69:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(17),n=s(71),r=!1;var a=function(e){r||s(70)},i=s(0)(o.a,n.a,!1,a,null,null);i.options.__file="includes/modules/wholesale/src/admin/components/WholesaleCustomer.vue",t.default=i.exports},70:function(e,t){},71:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wholesale-customer-list"},[s("h1",{staticClass:"wp-heading-inline"},[e._v(e._s(e.__("Wholesale Customers","dokan")))]),e._v(" "),s("hr",{staticClass:"wp-header-end"}),e._v(" "),s("ul",{staticClass:"subsubsub"},[s("li",[s("router-link",{attrs:{to:{name:"WholesaleCustomer",query:{status:"all"}},"active-class":"current",exact:""},domProps:{innerHTML:e._s(e.sprintf(e.__("All <span class='count'>(%s)</span>","dokan"),e.counts.all))}}),e._v(" | ")],1),e._v(" "),s("li",[s("router-link",{attrs:{to:{name:"WholesaleCustomer",query:{status:"active"}},"active-class":"current",exact:""},domProps:{innerHTML:e._s(e.sprintf(e.__("Active <span class='count'>(%s)</span>","dokan"),e.counts.active))}}),e._v(" | ")],1),e._v(" "),s("li",[s("router-link",{attrs:{to:{name:"WholesaleCustomer",query:{status:"deactive"}},"active-class":"current",exact:""},domProps:{innerHTML:e._s(e.sprintf(e.__("Deactive <span class='count'>(%s)</span>","dokan"),e.counts.deactive))}})],1)]),e._v(" "),s("search",{attrs:{title:"Search Customer"},on:{searched:e.doSearch}}),e._v(" "),s("list-table",{attrs:{columns:e.columns,loading:e.loading,rows:e.customers,actions:e.actions,actionColumn:"full_name","show-cb":e.showCb,"total-items":e.totalItems,"bulk-actions":e.bulkActions,"total-pages":e.totalPages,"per-page":e.perPage,"current-page":e.currentPage,"action-column":e.actionColumn,"not-found":"No customers found.","sort-by":e.sortBy,"sort-order":e.sortOrder},on:{sort:e.sortCallback,pagination:e.goToPage,"bulk:click":e.onBulkAction,searched:e.doSearch},scopedSlots:e._u([{key:"full_name",fn:function(t){return[s("img",{attrs:{src:t.row.avatar,alt:e.getFullName(t.row),width:"50"}}),e._v(" "),s("strong",[s("a",{attrs:{href:e.editUrl(t.row.id)}},[e._v(e._s(e.getFullName(t.row)?e.getFullName(t.row):e.__("(no name)","dokan")))])])]}},{key:"email",fn:function(t){return[s("a",{attrs:{href:"mailto:"+t.row.email}},[e._v(e._s(t.row.email))])]}},{key:"registered",fn:function(t){return[e._v("\n            "+e._s(e.moment(t.row.registered).format("MMM D, YYYY"))+"\n        ")]}},{key:"wholesale_status",fn:function(t){return[s("switches",{attrs:{enabled:"active"==t.row.wholesale_status,value:t.row.id},on:{input:e.onSwitch}})]}},{key:"row-actions",fn:function(t){return e._l(e.actions,function(o,n){return s("span",{class:o.key},["edit"==o.key?s("a",{attrs:{href:e.editUrl(t.row.id)}},[e._v(e._s(o.label))]):"orders"==o.key?s("a",{attrs:{href:e.ordersUrl(t.row.id)}},[e._v(e._s(o.label))]):s("a",{attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.onActionClick(o.key,t.row)}}},[e._v(e._s(o.label))]),e._v(" "),n!==e.actions.length-1?[e._v(" | ")]:e._e()],2)})}}])})],1)};o._withStripped=!0;var n={render:o,staticRenderFns:[]};t.a=n}});